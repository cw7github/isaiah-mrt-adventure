/* ============================================
   ELEVATOR REPAIR CREW - Industrial Workshop
   Playful Industrial Design for Kids
   ============================================ */

/* ============================================
   GOOGLE FONTS IMPORT
   ============================================ */
@import url('https://fonts.googleapis.com/css2?family=Bangers&family=Rubik:wght@400;500;600;700;800;900&family=Russo+One&display=swap');

/* ============================================
   COLOR PALETTE & ROOT VARIABLES
   ============================================ */
:root {
  /* Industrial Workshop Colors */
  --safety-orange: #ff6b35;
  --safety-orange-dark: #cc5529;
  --mechanic-blue: #1d3557;
  --mechanic-blue-dark: #0f1f36;
  --warning-yellow: #fee440;
  --warning-yellow-dark: #f5d420;
  --steel-gray: #6c757d;
  --success-green: #06d6a0;
  --success-green-dark: #05b88a;

  /* Additional industrial colors */
  --rust-red: #e63946;
  --concrete: #a8dadc;
  --dark-metal: #1a1a1a;
  --bolt-silver: #c0c0c0;
  --grease-black: #2b2d42;
  --workshop-floor: #3a3d54;
  --industrial-green: #38b000;
  --neon-blue: #00d9ff;

  /* Gradient variations */
  --metal-gradient: linear-gradient(180deg, #d3d3d3 0%, #8c8c8c 50%, #a8a8a8 100%);
  --brushed-metal: linear-gradient(135deg, #b8b8b8 0%, #8c8c8c 25%, #a8a8a8 50%, #8c8c8c 75%, #b8b8b8 100%);
  --caution-stripe: repeating-linear-gradient(
    45deg,
    var(--warning-yellow),
    var(--warning-yellow) 20px,
    var(--grease-black) 20px,
    var(--grease-black) 40px
  );
  --industrial-panel: linear-gradient(180deg, #3a3d54 0%, #2b2d42 100%);

  /* Typography */
  --font-header: 'Bangers', cursive;
  --font-industrial: 'Russo One', sans-serif;
  --font-body: 'Rubik', sans-serif;

  /* Shadows and depth */
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.4);
  --shadow-xl: 0 12px 24px rgba(0, 0, 0, 0.5);
  --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  --shadow-inset-deep: inset 0 4px 8px rgba(0, 0, 0, 0.4);
  --glow-orange: 0 0 20px rgba(255, 107, 53, 0.6);
  --glow-green: 0 0 20px rgba(6, 214, 160, 0.6);
  --glow-yellow: 0 0 20px rgba(254, 228, 64, 0.6);
}

/* ============================================
   LOADING SCREEN
   ============================================ */
.loading-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(135deg, var(--grease-black) 0%, var(--dark-metal) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  transition: opacity 0.5s ease, visibility 0.5s ease;
}

.loading-screen.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.loading-content {
  text-align: center;
  animation: fadeInUp 0.8s ease;
}

.loading-icon {
  font-size: 80px;
  animation: spinWrench 2s ease-in-out infinite;
  filter: drop-shadow(0 0 20px rgba(255, 107, 53, 0.6));
  margin-bottom: 20px;
}

.loading-title {
  font-family: var(--font-header);
  font-size: 48px;
  color: var(--safety-orange);
  text-shadow:
    0 0 20px rgba(255, 107, 53, 0.5),
    0 2px 4px rgba(0, 0, 0, 0.5);
  letter-spacing: 2px;
  margin-bottom: 10px;
}

.loading-subtitle {
  font-family: var(--font-industrial);
  font-size: 18px;
  color: var(--warning-yellow);
  text-transform: uppercase;
  letter-spacing: 3px;
  margin-bottom: 30px;
  animation: pulse 1.5s ease-in-out infinite;
}

.loading-bar {
  width: 300px;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
  box-shadow: var(--shadow-inset);
  border: 2px solid var(--steel-gray);
}

.loading-fill {
  height: 100%;
  background: linear-gradient(90deg,
    var(--safety-orange) 0%,
    var(--warning-yellow) 50%,
    var(--safety-orange) 100%
  );
  background-size: 200% 100%;
  animation: loadingProgress 1.5s ease-in-out infinite;
  box-shadow: 0 0 20px rgba(255, 107, 53, 0.6);
}

@keyframes spinWrench {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-20deg); }
  75% { transform: rotate(20deg); }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

@keyframes loadingProgress {
  0% {
    width: 0%;
    background-position: 0% 50%;
  }
  50% {
    width: 80%;
    background-position: 100% 50%;
  }
  100% {
    width: 100%;
    background-position: 200% 50%;
  }
}

/* ============================================
   GLOBAL RESET & BASE STYLES
   ============================================ */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: var(--font-body);
  background: #1a1a1a;
  color: #ffffff;
  overflow-x: hidden;
  min-height: 100vh;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  position: relative;
}

/* Add noise texture for industrial feel */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.05"/></svg>');
  pointer-events: none;
  z-index: 1;
  opacity: 0.4;
}

/* ============================================
   MAIN APP CONTAINER
   ============================================ */
.repair-crew-app {
  width: 100%;
  min-height: 100vh;
  position: relative;
  overflow: hidden;
}

/* ============================================
   INDUSTRIAL BACKGROUND EFFECTS
   ============================================ */
.workshop-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  background:
    radial-gradient(circle at 20% 80%, rgba(255, 107, 53, 0.15) 0%, transparent 40%),
    radial-gradient(circle at 80% 20%, rgba(6, 214, 160, 0.1) 0%, transparent 40%),
    radial-gradient(circle at 50% 50%, rgba(254, 228, 64, 0.05) 0%, transparent 60%);
  animation: workshop-pulse 10s ease-in-out infinite;
}

@keyframes workshop-pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 0.8; }
}

.metal-grid {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  background-image:
    linear-gradient(rgba(255, 255, 255, 0.02) 2px, transparent 2px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.02) 2px, transparent 2px);
  background-size: 50px 50px;
  opacity: 0.6;
}

/* Add animated rivets pattern */
.metal-grid::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: radial-gradient(circle, rgba(192, 192, 192, 0.3) 2px, transparent 2px);
  background-size: 50px 50px;
  background-position: 25px 25px;
}

/* ============================================
   UTILITY CLASSES
   ============================================ */
.hidden {
  display: none !important;
}

.caution-stripe {
  width: 100%;
  height: 16px;
  background: var(--caution-stripe);
  margin: 20px 0;
  box-shadow:
    var(--shadow-md),
    inset 0 2px 4px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.caution-stripe::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: stripe-shine 3s ease-in-out infinite;
}

@keyframes stripe-shine {
  0% { left: -100%; }
  50%, 100% { left: 100%; }
}

.caution-stripe.small {
  height: 10px;
  margin: 12px 0;
}

/* ============================================
   SCREEN 1: REPAIR HQ / WORKSHOP
   ============================================ */
.repair-hq {
  position: relative;
  z-index: 10;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background:
    linear-gradient(180deg, rgba(42, 45, 66, 0.8) 0%, rgba(26, 26, 26, 0.9) 100%);
}

/* Workshop Header */
.workshop-header {
  text-align: center;
  margin-bottom: 50px;
  animation: slide-down 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  position: relative;
}

@keyframes slide-down {
  from {
    opacity: 0;
    transform: translateY(-50px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.workshop-title {
  font-family: var(--font-header);
  font-size: clamp(2.5rem, 8vw, 4.5rem);
  color: var(--safety-orange);
  text-shadow:
    4px 4px 0 var(--grease-black),
    -2px -2px 0 var(--warning-yellow),
    0 0 30px rgba(255, 107, 53, 0.6),
    0 0 60px rgba(255, 107, 53, 0.3);
  letter-spacing: 4px;
  margin-bottom: 12px;
  transform: skewY(-2deg);
  position: relative;
  display: inline-block;
  padding: 0 20px;
}

.workshop-title::before {
  content: '⚠️';
  position: absolute;
  left: -40px;
  top: 50%;
  transform: translateY(-50%) rotate(-15deg);
  font-size: 0.7em;
  animation: warning-blink 2s ease-in-out infinite;
}

.workshop-title::after {
  content: '⚠️';
  position: absolute;
  right: -40px;
  top: 50%;
  transform: translateY(-50%) rotate(15deg);
  font-size: 0.7em;
  animation: warning-blink 2s ease-in-out infinite 1s;
}

@keyframes warning-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

.workshop-subtitle {
  font-family: var(--font-industrial);
  font-size: clamp(1rem, 3vw, 1.4rem);
  color: var(--concrete);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 3px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  background: linear-gradient(135deg, var(--mechanic-blue) 0%, var(--mechanic-blue-dark) 100%);
  padding: 8px 24px;
  border-radius: 8px;
  display: inline-block;
  border: 2px solid var(--steel-gray);
  box-shadow: var(--shadow-md);
}

/* Tool Belt */
.tool-belt {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  background:
    linear-gradient(180deg, #3a3d54 0%, #2b2d42 100%);
  border: 4px solid var(--steel-gray);
  border-radius: 20px;
  padding: 16px 24px;
  box-shadow:
    var(--shadow-xl),
    inset 0 2px 4px rgba(255, 255, 255, 0.1),
    0 0 0 2px rgba(0, 0, 0, 0.3);
  animation: tool-belt-rise 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  max-width: 95vw;
  overflow-x: auto;
}

/* Add rivets to tool belt */
.tool-belt::before,
.tool-belt::after {
  content: '';
  position: absolute;
  top: 8px;
  width: 8px;
  height: 8px;
  background: radial-gradient(circle, #888 0%, #555 100%);
  border-radius: 50%;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
}

.tool-belt::before { left: 8px; }
.tool-belt::after { right: 8px; }

@keyframes tool-belt-rise {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(150px) scale(0.8);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}

.tool-belt-label {
  font-family: var(--font-industrial);
  font-size: 1rem;
  color: var(--warning-yellow);
  text-align: center;
  margin-bottom: 12px;
  letter-spacing: 3px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.tool-belt-items {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  justify-content: center;
}

.tool-item {
  background: linear-gradient(135deg, var(--mechanic-blue) 0%, var(--mechanic-blue-dark) 100%);
  border: 3px solid var(--steel-gray);
  border-radius: 16px;
  padding: 16px 20px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  box-shadow:
    var(--shadow-lg),
    inset 0 2px 4px rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  min-width: 90px;
  position: relative;
  overflow: hidden;
}

/* Tool item shine effect */
.tool-item::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 70%
  );
  transform: rotate(45deg);
  transition: all 0.5s ease;
}

.tool-item:hover::before {
  left: 100%;
}

.tool-item:hover {
  transform: translateY(-6px) scale(1.08);
  box-shadow:
    0 12px 24px rgba(0, 0, 0, 0.5),
    0 0 30px rgba(255, 107, 53, 0.3),
    inset 0 2px 4px rgba(255, 255, 255, 0.2);
  border-color: var(--safety-orange);
}

.tool-item:active {
  transform: translateY(-3px) scale(1.05);
  animation: tool-bounce 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

@keyframes tool-bounce {
  0% { transform: translateY(-3px) scale(1.05); }
  50% { transform: translateY(-8px) scale(1.1) rotate(5deg); }
  100% { transform: translateY(-3px) scale(1.05); }
}

.tool-item.selected {
  background: linear-gradient(135deg, var(--safety-orange) 0%, var(--safety-orange-dark) 100%);
  border-color: var(--warning-yellow);
  border-width: 4px;
  animation: tool-pulse 1.5s ease-in-out infinite, tool-glow 2s ease-in-out infinite;
  transform: translateY(-6px) scale(1.05);
}

@keyframes tool-pulse {
  0%, 100% {
    box-shadow:
      var(--shadow-lg),
      0 0 20px var(--safety-orange),
      inset 0 2px 4px rgba(255, 255, 255, 0.2);
  }
  50% {
    box-shadow:
      var(--shadow-xl),
      0 0 40px var(--safety-orange),
      0 0 60px rgba(255, 107, 53, 0.5),
      inset 0 2px 4px rgba(255, 255, 255, 0.3);
  }
}

@keyframes tool-glow {
  0%, 100% { filter: brightness(1); }
  50% { filter: brightness(1.2); }
}

.tool-icon {
  font-size: 2.5rem;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
  transition: transform 0.3s ease;
}

.tool-item:hover .tool-icon {
  transform: scale(1.2) rotate(5deg);
}

.tool-item.selected .tool-icon {
  animation: tool-icon-spin 1s ease-in-out infinite;
}

@keyframes tool-icon-spin {
  0%, 100% { transform: rotate(0deg) scale(1); }
  25% { transform: rotate(-10deg) scale(1.1); }
  75% { transform: rotate(10deg) scale(1.1); }
}

.tool-name {
  font-size: 0.85rem;
  font-weight: 700;
  color: #ffffff;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

/* Radio Dispatch */
.radio-dispatch {
  background: var(--industrial-panel);
  border: 5px solid var(--steel-gray);
  border-radius: 24px;
  padding: 40px;
  max-width: 550px;
  width: 100%;
  box-shadow:
    var(--shadow-xl),
    inset 0 2px 4px rgba(255, 255, 255, 0.05),
    0 0 0 3px rgba(0, 0, 0, 0.3);
  animation: radio-appear 0.8s ease-out 0.3s both;
  position: relative;
}

/* Add corner bolts */
.radio-dispatch::before,
.radio-dispatch::after {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  background: radial-gradient(circle, var(--bolt-silver) 0%, #666 100%);
  border-radius: 50%;
  box-shadow:
    inset 0 2px 3px rgba(0, 0, 0, 0.5),
    0 1px 2px rgba(255, 255, 255, 0.3);
  top: 12px;
}

.radio-dispatch::before { left: 12px; }
.radio-dispatch::after { right: 12px; }

@keyframes radio-appear {
  from {
    opacity: 0;
    transform: scale(0.8) translateY(30px) rotate(-3deg);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0) rotate(0deg);
  }
}

.radio-box {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 24px;
  padding: 20px;
  background: linear-gradient(135deg, var(--mechanic-blue) 0%, var(--mechanic-blue-dark) 100%);
  border-radius: 16px;
  border: 3px solid var(--dark-metal);
  position: relative;
  box-shadow:
    var(--shadow-md),
    inset 0 2px 4px rgba(255, 255, 255, 0.1);
}

.radio-speaker {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 8px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 8px;
}

.speaker-grille {
  width: 50px;
  height: 5px;
  background: var(--steel-gray);
  border-radius: 3px;
  box-shadow: var(--shadow-inset);
  position: relative;
  overflow: hidden;
}

.speaker-grille::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
}

.radio-light {
  width: 20px;
  height: 20px;
  background: var(--dark-metal);
  border-radius: 50%;
  box-shadow:
    var(--shadow-inset),
    0 0 0 3px rgba(0, 0, 0, 0.5);
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.radio-light.active {
  background: var(--success-green);
  box-shadow:
    0 0 20px var(--success-green),
    0 0 40px rgba(6, 214, 160, 0.6),
    inset 0 2px 4px rgba(255, 255, 255, 0.4);
  animation: radio-pulse 2s ease-in-out infinite;
}

@keyframes radio-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
    box-shadow:
      0 0 20px var(--success-green),
      0 0 40px rgba(6, 214, 160, 0.6),
      inset 0 2px 4px rgba(255, 255, 255, 0.4);
  }
  50% {
    opacity: 0.8;
    transform: scale(0.95);
    box-shadow:
      0 0 10px var(--success-green),
      0 0 20px rgba(6, 214, 160, 0.4),
      inset 0 2px 4px rgba(255, 255, 255, 0.3);
  }
}

.radio-label {
  font-family: var(--font-industrial);
  font-size: 1.6rem;
  color: var(--concrete);
  letter-spacing: 3px;
  flex: 1;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

/* Trouble Ticket */
.trouble-ticket {
  background: #ffffff;
  border: 4px solid var(--grease-black);
  border-radius: 12px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow:
    var(--shadow-lg),
    0 0 0 2px rgba(0, 0, 0, 0.2);
  animation: ticket-appear 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  position: relative;
  transform-origin: top center;
}

/* Ticket perforation effect */
.trouble-ticket::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 8px;
  background: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 8px,
    var(--grease-black) 8px,
    var(--grease-black) 16px
  );
}

@keyframes ticket-appear {
  from {
    opacity: 0;
    transform: translateY(-30px) rotate(-5deg) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) rotate(0deg) scale(1);
  }
}

.ticket-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  margin-top: 8px;
  padding-bottom: 16px;
  border-bottom: 3px dashed var(--steel-gray);
}

.ticket-label {
  font-family: var(--font-header);
  font-size: 1.5rem;
  color: var(--safety-orange);
  letter-spacing: 2px;
  text-shadow: 2px 2px 0 rgba(255, 107, 53, 0.2);
}

.ticket-number {
  font-family: var(--font-industrial);
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--grease-black);
  background: var(--warning-yellow);
  padding: 6px 16px;
  border-radius: 8px;
  box-shadow: var(--shadow-sm);
  border: 2px solid rgba(0, 0, 0, 0.1);
}

.ticket-field {
  margin-bottom: 16px;
  display: flex;
  gap: 12px;
  font-size: 1.05rem;
  color: var(--grease-black);
  align-items: flex-start;
}

.field-label {
  font-weight: 800;
  color: var(--mechanic-blue);
  min-width: 110px;
  font-family: var(--font-body);
  text-transform: uppercase;
  font-size: 0.9rem;
  letter-spacing: 0.5px;
}

.field-value {
  font-weight: 600;
  flex: 1;
  line-height: 1.4;
}

.urgency-high {
  color: var(--rust-red);
  font-weight: 900;
  text-transform: uppercase;
  animation: urgency-pulse 1.5s ease-in-out infinite;
  font-size: 1.1rem;
}

@keyframes urgency-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

/* Start Repair Button */
.start-repair-btn {
  width: 100%;
  background: linear-gradient(135deg, var(--safety-orange) 0%, var(--safety-orange-dark) 100%);
  border: 4px solid var(--warning-yellow);
  border-radius: 16px;
  padding: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  font-family: var(--font-header);
  font-size: clamp(1.2rem, 4vw, 1.8rem);
  color: #ffffff;
  letter-spacing: 3px;
  box-shadow:
    var(--shadow-lg),
    inset 0 3px 0 rgba(255, 255, 255, 0.3),
    inset 0 -3px 0 rgba(0, 0, 0, 0.3);
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  position: relative;
  overflow: hidden;
}

.start-repair-btn::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.2) 50%,
    transparent 70%
  );
  transform: rotate(45deg);
  animation: button-shine 3s ease-in-out infinite;
}

@keyframes button-shine {
  0% { left: -50%; }
  50%, 100% { left: 150%; }
}

.start-repair-btn:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow:
    0 12px 28px rgba(0, 0, 0, 0.5),
    var(--glow-orange),
    inset 0 3px 0 rgba(255, 255, 255, 0.4),
    inset 0 -3px 0 rgba(0, 0, 0, 0.3);
  border-color: #fff;
}

.start-repair-btn:active {
  transform: translateY(-2px) scale(1);
}

.btn-text {
  flex: 1;
  text-align: center;
  text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
}

.btn-icon {
  font-size: 2.5rem;
  animation: radio-wave 2s ease-in-out infinite;
  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
}

@keyframes radio-wave {
  0%, 100% {
    transform: translateY(0) scale(1);
  }
  25% {
    transform: translateY(-6px) scale(1.1) rotate(-10deg);
  }
  75% {
    transform: translateY(-6px) scale(1.1) rotate(10deg);
  }
}

/* ============================================
   SCREEN 2: REPAIR SITE
   ============================================ */
.repair-site {
  position: relative;
  z-index: 10;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  padding-bottom: 140px;
  background:
    linear-gradient(180deg, rgba(42, 45, 66, 0.8) 0%, rgba(26, 26, 26, 0.9) 100%);
}

/* Site Header */
.site-header {
  width: 100%;
  max-width: 650px;
  text-align: center;
  margin-bottom: 30px;
  animation: slide-down 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

.site-title {
  font-family: var(--font-header);
  font-size: clamp(1.8rem, 5vw, 2.5rem);
  color: var(--warning-yellow);
  text-shadow:
    3px 3px 0 var(--grease-black),
    0 0 20px rgba(254, 228, 64, 0.6);
  letter-spacing: 3px;
  margin-bottom: 12px;
  padding: 12px 24px;
  background: linear-gradient(135deg, rgba(255, 107, 53, 0.2) 0%, rgba(254, 228, 64, 0.1) 100%);
  border-radius: 12px;
  display: inline-block;
  border: 2px solid var(--warning-yellow);
  box-shadow: var(--shadow-md);
}

/* Elevator Container */
.elevator-container {
  width: 100%;
  max-width: 550px;
  background: var(--industrial-panel);
  border: 5px solid var(--steel-gray);
  border-radius: 24px;
  padding: 35px;
  box-shadow:
    var(--shadow-xl),
    inset 0 2px 4px rgba(255, 255, 255, 0.05),
    0 0 0 3px rgba(0, 0, 0, 0.3);
  margin-bottom: 24px;
  position: relative;
}

/* Add panel texture */
.elevator-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    linear-gradient(135deg, transparent 45%, rgba(255, 255, 255, 0.02) 50%, transparent 55%),
    linear-gradient(45deg, transparent 45%, rgba(255, 255, 255, 0.02) 50%, transparent 55%);
  background-size: 20px 20px;
  border-radius: 24px;
  pointer-events: none;
}

/* Elevator Frame */
.elevator-frame {
  background: linear-gradient(135deg, var(--mechanic-blue) 0%, var(--mechanic-blue-dark) 100%);
  border: 4px solid var(--dark-metal);
  border-radius: 20px;
  padding: 24px;
  position: relative;
  box-shadow:
    var(--shadow-lg),
    inset 0 2px 4px rgba(255, 255, 255, 0.1);
}

/* Floor Indicator */
.floor-indicator {
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(135deg, var(--dark-metal) 0%, #0a0a0a 100%);
  border: 4px solid var(--steel-gray);
  border-radius: 16px;
  padding: 12px 24px;
  display: flex;
  align-items: center;
  gap: 16px;
  box-shadow:
    var(--shadow-lg),
    0 0 30px rgba(6, 214, 160, 0.3);
  z-index: 10;
}

.indicator-display {
  font-family: var(--font-industrial);
  font-size: 2.5rem;
  color: var(--success-green);
  text-shadow:
    0 0 20px var(--success-green),
    0 0 40px rgba(6, 214, 160, 0.6);
  min-width: 50px;
  text-align: center;
  animation: floor-glow 2s ease-in-out infinite;
}

@keyframes floor-glow {
  0%, 100% {
    text-shadow:
      0 0 20px var(--success-green),
      0 0 40px rgba(6, 214, 160, 0.6);
  }
  50% {
    text-shadow:
      0 0 30px var(--success-green),
      0 0 60px rgba(6, 214, 160, 0.8);
  }
}

.indicator-label {
  font-family: var(--font-body);
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--concrete);
  text-transform: uppercase;
  letter-spacing: 2px;
}

/* Elevator Doors */
.elevator-doors {
  width: 100%;
  height: 350px;
  background: var(--brushed-metal);
  border: 4px solid var(--dark-metal);
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  margin: 35px 0 24px 0;
  box-shadow:
    var(--shadow-inset-deep),
    inset 0 0 0 2px rgba(255, 255, 255, 0.1);
}

/* Add metallic texture to doors */
.elevator-doors::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    linear-gradient(90deg, transparent 49%, rgba(255, 255, 255, 0.1) 50%, transparent 51%);
  pointer-events: none;
  z-index: 2;
}

.door-left,
.door-right {
  position: absolute;
  top: 0;
  width: 50%;
  height: 100%;
  background: var(--brushed-metal);
  border: 3px solid var(--steel-gray);
  transition: transform 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  box-shadow: var(--shadow-inset);
}

/* Add door panels */
.door-left::before,
.door-right::before {
  content: '';
  position: absolute;
  top: 20px;
  bottom: 20px;
  width: calc(100% - 40px);
  left: 20px;
  border: 2px solid rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.door-left {
  left: 0;
  border-right: 4px solid var(--grease-black);
  box-shadow: 4px 0 8px rgba(0, 0, 0, 0.3);
}

.door-right {
  right: 0;
  border-left: 4px solid var(--grease-black);
  box-shadow: -4px 0 8px rgba(0, 0, 0, 0.3);
}

.elevator-doors.stuck .door-left {
  transform: translateX(-12%);
  animation: door-shake 0.5s ease-in-out infinite;
}

.elevator-doors.stuck .door-right {
  transform: translateX(12%);
  animation: door-shake 0.5s ease-in-out infinite reverse;
}

@keyframes door-shake {
  0%, 100% { transform: translateX(-12%); }
  50% { transform: translateX(-10%); }
}

.elevator-doors.open .door-left {
  transform: translateX(-100%);
}

.elevator-doors.open .door-right {
  transform: translateX(100%);
}

/* Door Track */
.door-track {
  position: absolute;
  bottom: 15px;
  left: 15px;
  right: 15px;
  height: 28px;
  background: linear-gradient(180deg, #4a4a4a 0%, #2a2a2a 100%);
  border: 3px solid #1a1a1a;
  border-radius: 6px;
  box-shadow:
    var(--shadow-inset-deep),
    0 2px 4px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 3;
}

.door-track:hover {
  border-color: var(--safety-orange);
  box-shadow:
    var(--shadow-inset-deep),
    0 0 20px rgba(255, 107, 53, 0.5);
}

.track-dirt {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80px;
  height: 16px;
  background: repeating-linear-gradient(
    45deg,
    #5a4a3a,
    #5a4a3a 4px,
    #6a5a4a 4px,
    #6a5a4a 8px
  );
  border-radius: 4px;
  opacity: 1;
  transition: opacity 0.5s ease, transform 0.5s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.track-dirt.cleaned {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0) rotate(180deg);
  animation: dirt-clean 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

@keyframes dirt-clean {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
  }
  50% {
    opacity: 0.5;
    transform: translate(-50%, -50%) scale(1.2) rotate(90deg);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0) rotate(180deg);
  }
}

/* Control Panel */
.control-panel {
  background: linear-gradient(135deg, var(--dark-metal) 0%, #0a0a0a 100%);
  border: 3px solid var(--steel-gray);
  border-radius: 16px;
  padding: 20px;
  box-shadow:
    var(--shadow-md),
    inset 0 2px 4px rgba(255, 255, 255, 0.05);
}

.panel-title {
  font-family: var(--font-industrial);
  font-size: 1.1rem;
  color: var(--warning-yellow);
  text-align: center;
  margin-bottom: 16px;
  letter-spacing: 3px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.control-btn {
  width: 100%;
  background: linear-gradient(135deg, var(--mechanic-blue) 0%, var(--mechanic-blue-dark) 100%);
  border: 3px solid var(--steel-gray);
  border-radius: 12px;
  padding: 16px 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-family: var(--font-body);
  font-size: 1.1rem;
  font-weight: 800;
  color: #ffffff;
  text-transform: uppercase;
  letter-spacing: 2px;
  box-shadow:
    var(--shadow-md),
    inset 0 2px 0 rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease;
}

.control-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  filter: grayscale(0.8);
}

.control-btn:not(:disabled):hover {
  transform: translateY(-3px);
  box-shadow:
    var(--shadow-lg),
    0 0 20px rgba(6, 214, 160, 0.4),
    inset 0 2px 0 rgba(255, 255, 255, 0.2);
  border-color: var(--success-green);
}

.control-btn:not(:disabled):active {
  transform: translateY(-1px);
  animation: button-press 0.3s ease;
}

@keyframes button-press {
  0% { transform: translateY(-3px); }
  50% { transform: translateY(2px); }
  100% { transform: translateY(-1px); }
}

.btn-led {
  width: 14px;
  height: 14px;
  background: var(--dark-metal);
  border-radius: 50%;
  box-shadow: var(--shadow-inset);
  flex-shrink: 0;
}

.control-btn:not(:disabled) .btn-led {
  background: var(--success-green);
  box-shadow:
    0 0 15px var(--success-green),
    0 0 30px rgba(6, 214, 160, 0.5);
  animation: led-pulse 1.5s ease-in-out infinite;
}

@keyframes led-pulse {
  0%, 100% {
    opacity: 1;
    box-shadow:
      0 0 15px var(--success-green),
      0 0 30px rgba(6, 214, 160, 0.5);
  }
  50% {
    opacity: 0.6;
    box-shadow:
      0 0 8px var(--success-green),
      0 0 16px rgba(6, 214, 160, 0.3);
  }
}

/* Inspection Points */
.inspection-points {
  display: flex;
  gap: 16px;
  margin-top: 24px;
  flex-wrap: wrap;
  justify-content: center;
}

.inspect-btn {
  background: linear-gradient(135deg, var(--steel-gray) 0%, #5a5a5a 100%);
  border: 3px solid var(--concrete);
  border-radius: 14px;
  padding: 14px 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  font-family: var(--font-body);
  font-size: 1rem;
  font-weight: 700;
  color: #ffffff;
  box-shadow:
    var(--shadow-md),
    inset 0 2px 0 rgba(255, 255, 255, 0.2);
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  position: relative;
  overflow: hidden;
}

.inspect-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.5s ease, height 0.5s ease;
}

.inspect-btn:hover::before {
  width: 300px;
  height: 300px;
}

.inspect-btn:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow:
    var(--shadow-lg),
    0 0 25px rgba(255, 107, 53, 0.4);
  border-color: var(--safety-orange);
}

.inspect-btn:active {
  animation: inspect-press 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

@keyframes inspect-press {
  0%, 100% { transform: translateY(-4px) scale(1.05); }
  50% { transform: translateY(-2px) scale(0.98) rotate(2deg); }
}

.inspect-icon {
  font-size: 1.5rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.inspect-label {
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* Repair Manual */
.repair-manual {
  width: 100%;
  max-width: 550px;
  background: #fffacd;
  border: 4px solid var(--warning-yellow-dark);
  border-radius: 16px;
  padding: 24px;
  box-shadow:
    var(--shadow-lg),
    0 0 0 2px rgba(0, 0, 0, 0.1);
  margin-bottom: 24px;
  animation: manual-slide 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  position: relative;
}

/* Add paper texture */
.repair-manual::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 30px,
    rgba(0, 0, 0, 0.03) 30px,
    rgba(0, 0, 0, 0.03) 31px
  );
  pointer-events: none;
  border-radius: 16px;
}

@keyframes manual-slide {
  from {
    opacity: 0;
    transform: translateX(-40px) rotate(-3deg);
  }
  to {
    opacity: 1;
    transform: translateX(0) rotate(0deg);
  }
}

.manual-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 3px solid var(--warning-yellow-dark);
}

.manual-icon {
  font-size: 2rem;
  filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.2));
}

.manual-title {
  font-family: var(--font-header);
  font-size: 1.5rem;
  color: var(--grease-black);
  letter-spacing: 2px;
  text-shadow: 2px 2px 0 rgba(254, 228, 64, 0.3);
}

.manual-content {
  font-family: var(--font-body);
  font-size: 1.05rem;
  color: var(--grease-black);
  line-height: 1.8;
}

.manual-content p {
  margin-bottom: 12px;
}

.manual-content strong {
  color: var(--mechanic-blue);
  font-weight: 800;
  font-size: 1.1rem;
}

/* Diagnosis Feedback */
.diagnosis-feedback {
  width: 100%;
  max-width: 550px;
  background: linear-gradient(135deg, var(--success-green) 0%, var(--success-green-dark) 100%);
  border: 4px solid #ffffff;
  border-radius: 16px;
  padding: 24px;
  display: flex;
  align-items: center;
  gap: 20px;
  box-shadow:
    var(--shadow-lg),
    0 0 40px rgba(6, 214, 160, 0.4);
  animation: feedback-pop 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

@keyframes feedback-pop {
  0% {
    opacity: 0;
    transform: scale(0.7) rotate(-5deg);
  }
  50% {
    transform: scale(1.05) rotate(2deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

.feedback-icon {
  font-size: 3.5rem;
  background: #ffffff;
  width: 70px;
  height: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  color: var(--success-green);
  font-weight: 900;
  box-shadow:
    var(--shadow-md),
    inset 0 2px 4px rgba(0, 0, 0, 0.1);
  flex-shrink: 0;
}

.feedback-text {
  flex: 1;
  font-family: var(--font-body);
  font-size: 1.15rem;
  font-weight: 700;
  color: #ffffff;
  line-height: 1.5;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* ============================================
   SCREEN 3: REPAIR SUCCESS
   ============================================ */
.repair-success {
  position: relative;
  z-index: 10;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  animation: success-appear 1s ease-out;
  background:
    radial-gradient(circle at 50% 50%, rgba(6, 214, 160, 0.2) 0%, transparent 60%),
    linear-gradient(180deg, rgba(42, 45, 66, 0.8) 0%, rgba(26, 26, 26, 0.9) 100%);
}

@keyframes success-appear {
  from {
    opacity: 0;
    filter: blur(10px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}

/* Success Banner */
.success-banner {
  text-align: center;
  margin-bottom: 50px;
  animation: banner-drop 1s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

@keyframes banner-drop {
  0% {
    opacity: 0;
    transform: translateY(-150px) rotate(-15deg) scale(0.5);
  }
  60% {
    transform: translateY(20px) rotate(5deg) scale(1.1);
  }
  100% {
    opacity: 1;
    transform: translateY(0) rotate(0deg) scale(1);
  }
}

.success-icon {
  font-size: 7rem;
  background: linear-gradient(135deg, var(--success-green) 0%, var(--success-green-dark) 100%);
  width: 140px;
  height: 140px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  color: #ffffff;
  font-weight: 900;
  margin: 0 auto 28px;
  box-shadow:
    var(--shadow-xl),
    0 0 50px rgba(6, 214, 160, 0.7),
    inset 0 4px 8px rgba(255, 255, 255, 0.3);
  animation: success-pulse 2s ease-in-out infinite;
  border: 5px solid rgba(255, 255, 255, 0.3);
}

@keyframes success-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow:
      var(--shadow-xl),
      0 0 50px rgba(6, 214, 160, 0.7),
      inset 0 4px 8px rgba(255, 255, 255, 0.3);
  }
  50% {
    transform: scale(1.15);
    box-shadow:
      0 16px 32px rgba(0, 0, 0, 0.6),
      0 0 80px rgba(6, 214, 160, 1),
      inset 0 4px 8px rgba(255, 255, 255, 0.4);
  }
}

.success-title {
  font-family: var(--font-header);
  font-size: clamp(2.5rem, 7vw, 3.8rem);
  color: var(--success-green);
  text-shadow:
    4px 4px 0 var(--grease-black),
    -2px -2px 0 rgba(255, 255, 255, 0.3),
    0 0 40px rgba(6, 214, 160, 0.8);
  letter-spacing: 4px;
  margin-bottom: 12px;
  animation: title-glow 2s ease-in-out infinite;
}

@keyframes title-glow {
  0%, 100% {
    text-shadow:
      4px 4px 0 var(--grease-black),
      -2px -2px 0 rgba(255, 255, 255, 0.3),
      0 0 40px rgba(6, 214, 160, 0.8);
  }
  50% {
    text-shadow:
      4px 4px 0 var(--grease-black),
      -2px -2px 0 rgba(255, 255, 255, 0.5),
      0 0 60px rgba(6, 214, 160, 1);
  }
}

.success-subtitle {
  font-family: var(--font-body);
  font-size: clamp(1.1rem, 3vw, 1.4rem);
  color: var(--concrete);
  font-weight: 700;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

/* Happy Passengers */
.passengers-happy {
  position: relative;
  margin-bottom: 50px;
  animation: passengers-enter 1.2s ease-out 0.6s both;
}

@keyframes passengers-enter {
  from {
    opacity: 0;
    transform: translateX(-80px) scale(0.8);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

.passenger {
  font-size: 5rem;
  display: inline-block;
  margin: 0 15px;
  animation: passenger-celebrate 2s ease-in-out infinite;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.passenger:nth-child(1) { animation-delay: 0s; }
.passenger:nth-child(2) { animation-delay: 0.4s; }
.passenger:nth-child(3) { animation-delay: 0.8s; }

@keyframes passenger-celebrate {
  0%, 100% {
    transform: translateY(0) rotate(0deg) scale(1);
  }
  25% {
    transform: translateY(-15px) rotate(-15deg) scale(1.1);
  }
  50% {
    transform: translateY(0) rotate(0deg) scale(1);
  }
  75% {
    transform: translateY(-15px) rotate(15deg) scale(1.1);
  }
}

.speech-bubble {
  background: #ffffff;
  border: 4px solid var(--grease-black);
  border-radius: 24px;
  padding: 20px 32px;
  font-family: var(--font-body);
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--grease-black);
  position: relative;
  margin-top: 24px;
  display: inline-block;
  box-shadow: var(--shadow-lg);
  animation: bubble-bounce 3s ease-in-out infinite;
}

@keyframes bubble-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

.speech-bubble::before {
  content: '';
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 20px solid transparent;
  border-right: 20px solid transparent;
  border-bottom: 20px solid var(--grease-black);
}

.speech-bubble::after {
  content: '';
  position: absolute;
  top: -14px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 16px solid transparent;
  border-right: 16px solid transparent;
  border-bottom: 16px solid #ffffff;
}

/* Badge Earned */
.badge-earned {
  text-align: center;
  margin-bottom: 40px;
}

.badge-stamp {
  background: linear-gradient(135deg, var(--warning-yellow) 0%, var(--warning-yellow-dark) 100%);
  border: 6px solid var(--safety-orange);
  border-radius: 50%;
  width: 180px;
  height: 180px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  box-shadow:
    var(--shadow-xl),
    0 0 50px rgba(254, 228, 64, 0.6),
    inset 0 4px 8px rgba(255, 255, 255, 0.4);
  animation: badge-stamp 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0.8s both, badge-shine 3s ease-in-out infinite 2s;
  transform-origin: center;
  position: relative;
}

/* Add star burst behind badge */
.badge-stamp::before {
  content: '✦';
  position: absolute;
  font-size: 12rem;
  color: var(--warning-yellow);
  opacity: 0.2;
  z-index: -1;
  animation: star-rotate 10s linear infinite;
}

@keyframes star-rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes badge-stamp {
  0% {
    opacity: 0;
    transform: scale(0) rotate(-360deg);
  }
  60% {
    transform: scale(1.2) rotate(20deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

@keyframes badge-shine {
  0%, 100% {
    box-shadow:
      var(--shadow-xl),
      0 0 50px rgba(254, 228, 64, 0.6),
      inset 0 4px 8px rgba(255, 255, 255, 0.4);
  }
  50% {
    box-shadow:
      var(--shadow-xl),
      0 0 80px rgba(254, 228, 64, 0.9),
      inset 0 4px 8px rgba(255, 255, 255, 0.6);
  }
}

.badge-icon {
  font-size: 4rem;
  margin-bottom: 10px;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
  animation: badge-icon-pop 2s ease-in-out infinite;
}

@keyframes badge-icon-pop {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

.badge-name {
  font-family: var(--font-header);
  font-size: 1.4rem;
  color: var(--grease-black);
  letter-spacing: 2px;
  text-align: center;
  line-height: 1.2;
  text-shadow: 2px 2px 0 rgba(255, 255, 255, 0.5);
}

.badge-message {
  font-family: var(--font-body);
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--warning-yellow);
  text-shadow:
    2px 2px 0 var(--grease-black),
    0 0 20px rgba(254, 228, 64, 0.6);
}

/* Next Repair Button */
.next-repair-btn {
  background: linear-gradient(135deg, var(--safety-orange) 0%, var(--safety-orange-dark) 100%);
  border: 4px solid var(--warning-yellow);
  border-radius: 16px;
  padding: 24px 48px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 20px;
  font-family: var(--font-header);
  font-size: clamp(1.3rem, 4vw, 1.8rem);
  color: #ffffff;
  letter-spacing: 3px;
  box-shadow:
    var(--shadow-lg),
    inset 0 3px 0 rgba(255, 255, 255, 0.3),
    inset 0 -3px 0 rgba(0, 0, 0, 0.3);
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  animation: next-btn-appear 1s ease-out 1.5s both;
  position: relative;
  overflow: hidden;
}

.next-repair-btn::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.2) 50%,
    transparent 70%
  );
  transform: rotate(45deg);
  animation: button-shine 3s ease-in-out infinite 2s;
}

@keyframes next-btn-appear {
  from {
    opacity: 0;
    transform: translateY(50px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.next-repair-btn:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow:
    0 16px 32px rgba(0, 0, 0, 0.6),
    var(--glow-orange),
    inset 0 3px 0 rgba(255, 255, 255, 0.4),
    inset 0 -3px 0 rgba(0, 0, 0, 0.3);
  border-color: #fff;
}

.next-repair-btn:active {
  transform: translateY(-2px) scale(1.02);
}

.btn-arrow {
  font-size: 2.5rem;
  animation: arrow-pulse 1.5s ease-in-out infinite;
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
}

@keyframes arrow-pulse {
  0%, 100% {
    transform: translateX(0) scale(1);
  }
  50% {
    transform: translateX(8px) scale(1.2);
  }
}

/* ============================================
   SPARKS EFFECT (Used During Repairs)
   ============================================ */
.sparks-effect {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 200;
  pointer-events: none;
  overflow: hidden;
}

.spark {
  position: absolute;
  width: 6px;
  height: 6px;
  background: var(--warning-yellow);
  border-radius: 50%;
  box-shadow:
    0 0 10px var(--warning-yellow),
    0 0 20px rgba(254, 228, 64, 0.8);
  animation: spark-fly 1s ease-out forwards;
}

@keyframes spark-fly {
  0% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
    filter: brightness(1.5);
  }
  100% {
    opacity: 0;
    transform: translate(var(--spark-x), var(--spark-y)) scale(0.2);
    filter: brightness(0.5);
  }
}

/* Confetti effect for success */
.confetti {
  position: absolute;
  width: 10px;
  height: 10px;
  background: var(--safety-orange);
  animation: confetti-fall 3s ease-out forwards;
}

@keyframes confetti-fall {
  0% {
    opacity: 1;
    transform: translateY(0) rotate(0deg);
  }
  100% {
    opacity: 0;
    transform: translateY(100vh) rotate(720deg);
  }
}

/* ============================================
   MOBILE & TOUCH OPTIMIZATIONS
   ============================================ */

/* Touch-friendly tap targets - ensure all clickable elements are at least 44x44px */
button, .btn, [role="button"], .tool-item, .inspect-btn, .control-btn,
.start-repair-btn, .next-repair-btn {
  min-width: 44px;
  min-height: 44px;
}

/* Disable hover effects on touch devices and replace with active states */
@media (hover: none) {
  .tool-item:hover,
  .inspect-btn:hover,
  .control-btn:not(:disabled):hover,
  .start-repair-btn:hover,
  .next-repair-btn:hover {
    transform: none;
    box-shadow: var(--shadow-md);
  }

  .tool-item:active {
    transform: scale(0.95);
  }

  .inspect-btn:active,
  .control-btn:not(:disabled):active,
  .start-repair-btn:active,
  .next-repair-btn:active {
    transform: scale(0.95);
  }
}

/* Touch action for draggable elements */
.draggable, [draggable="true"] {
  touch-action: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Safe area insets for notched devices */
body {
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* Prevent zoom on inputs */
input, select, textarea {
  font-size: 16px; /* Prevents iOS zoom */
}

/* ============================================
   RESPONSIVE DESIGN
   ============================================ */

/* Tablet */
@media (max-width: 1024px) {
  .workshop-title {
    font-size: clamp(2rem, 6vw, 3.5rem);
  }

  .radio-dispatch,
  .elevator-container {
    max-width: 90%;
  }

  .tool-belt {
    max-width: 90vw;
  }
}

/* Mobile */
@media (max-width: 768px) {
  .workshop-title {
    font-size: clamp(2rem, 7vw, 3rem);
  }

  .workshop-subtitle {
    font-size: clamp(0.9rem, 2.5vw, 1.2rem);
  }

  .repair-hq,
  .repair-site {
    padding: 15px;
  }

  .radio-dispatch,
  .elevator-container {
    padding: 25px;
  }

  .tool-belt-items {
    gap: 12px;
  }

  .tool-item {
    min-width: 80px;
    padding: 14px 16px;
  }

  .tool-icon {
    font-size: 2.2rem;
  }

  .tool-name {
    font-size: 0.75rem;
  }

  .elevator-doors {
    height: 300px;
  }

  /* Simplify animations for mobile performance */
  .spark,
  .confetti {
    animation-duration: 0.8s;
  }
}

/* Small mobile */
@media (max-width: 480px) {
  .workshop-title {
    font-size: 2rem;
    letter-spacing: 1px;
  }

  .tool-belt {
    padding: 10px 14px;
    bottom: 5px;
  }

  .tool-item {
    min-width: 70px;
    padding: 12px;
  }

  .tool-icon {
    font-size: 2rem;
  }

  .radio-dispatch,
  .elevator-container {
    padding: 20px;
  }

  .elevator-doors {
    height: 250px;
  }

  /* Maximum simplification for small screens */
  .workshop-title::before,
  .workshop-title::after {
    display: none;
  }
}

@media (max-width: 600px) {
  .workshop-title {
    font-size: 2.5rem;
    letter-spacing: 2px;
  }

  .workshop-title::before,
  .workshop-title::after {
    display: none;
  }

  .workshop-subtitle {
    font-size: 0.9rem;
    padding: 6px 16px;
  }

  .tool-belt {
    padding: 12px 16px;
    bottom: 10px;
  }

  .tool-belt-items {
    gap: 10px;
  }

  .tool-item {
    min-width: 70px;
    padding: 12px 14px;
  }

  .tool-icon {
    font-size: 2rem;
  }

  .tool-name {
    font-size: 0.7rem;
  }

  .radio-dispatch {
    padding: 24px;
  }

  .site-title {
    font-size: 1.5rem;
  }

  .elevator-container {
    padding: 20px;
  }

  .elevator-doors {
    height: 280px;
  }

  .success-title {
    font-size: 2rem;
  }

  .passenger {
    font-size: 3.5rem;
    margin: 0 8px;
  }

  .badge-stamp {
    width: 140px;
    height: 140px;
  }

  .badge-icon {
    font-size: 3rem;
  }

  .badge-name {
    font-size: 1.1rem;
  }

  .next-repair-btn {
    padding: 18px 32px;
  }
}

@media (max-width: 400px) {
  .caution-stripe {
    height: 12px;
  }

  .tool-belt-label {
    font-size: 0.8rem;
  }

  .elevator-doors {
    height: 240px;
  }

  .floor-indicator {
    padding: 8px 16px;
  }

  .indicator-display {
    font-size: 2rem;
  }
}

/* ============================================
   ACCESSIBILITY ENHANCEMENTS
   ============================================ */

/* Skip Link */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: #000;
  color: #fff;
  padding: 8px;
  z-index: 10000;
  text-decoration: none;
  font-weight: bold;
}

.skip-link:focus {
  top: 0;
}

/* Screen Reader Only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  border: 0;
}

/* Focus Styles for Accessibility */
button:focus-visible,
.door-track:focus-visible,
a:focus-visible {
  outline: 3px solid var(--warning-yellow);
  outline-offset: 3px;
}

.tool-item:focus-visible {
  outline: 3px solid var(--warning-yellow);
  outline-offset: 2px;
}

.inspect-btn:focus-visible {
  outline: 3px solid var(--safety-orange);
  outline-offset: 2px;
}
